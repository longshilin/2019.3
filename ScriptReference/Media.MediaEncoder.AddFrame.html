<!DOCTYPE html><html class="no-js" lang="zh_CN"><head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="twitter:card" content="summary" /><meta name="robots" content="noindex" /><meta property="og:title" content="Media.MediaEncoder-AddFrame - Unity Scripting API" /><title>Media.MediaEncoder-AddFrame - Unity Scripting API</title><meta name="description" content="将帧附加到文件的视频轨道。" /><meta property="og:description" content="将帧附加到文件的视频轨道。" /><meta name="author" content="Unity Technologies" /><link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico" /><link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" /><link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" /><link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" /><link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" /><meta name="msapplication-TileColor" content="#222c37" /><meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" /><script>
      var docs_type = 'ScriptReference';
      var lang = 'zh_CN';
      var page = 'Media.MediaEncoder-AddFrame';
      if(!page) page = 'index';
      var version = '2019.3';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" /><link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css" /><link rel="canonical" href="https://docs.unity3d.com/zh_CN/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html" /><link rel="alternate" href="https://docs.unity3d.com/en/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html" hreflang="en" /><link rel="alternate" href="https://docs.unity3d.com/ja/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html" hreflang="ja" /><link rel="alternate" href="https://docs.unity3d.com/es/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html" hreflang="es" /><link rel="alternate" href="https://docs.unity3d.com/kr/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html" hreflang="ko" /><link rel="alternate" href="https://docs.unity3d.com/2019.3/Documentation/ScriptReference/Media.MediaEncoder-AddFrame.html" hreflang="x-default" /></head><body><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="header-wrapper"><div id="header" class="header"><div class="content"><div class="spacer"><div class="menu"><div id="nav-open" for="nav-input"><span></span></div><div class="logo"><a href="https://docs.unity3d.com"></a></div><div class="search-form"><form action="30_search.html" method="get" class="apisearch"><input type="text" name="q" placeholder="Search scripting..." autosave="Unity Reference" results="5" class="sbox field" id="q"></input><input type="submit" class="submit"></input></form></div><ul class="menu-items"><li class="menu-item"><a href="../Manual/index.html" class="">Manual</a></li><li class="menu-item"><a href="../ScriptReference/index.html" class="selected">Scripting API</a></li></ul></div></div><div class="more"><div class="filler"></div><ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul></div></div></div><div class="toolbar"><div class="content"><div class="version-switcher"><div class="current toggle" data-target=".version-list"><div class="version-number"><div class="d-inline-block">
          Version:
          <b>2019.3</b></div><div class="d-inline-block arrow"></div></div></div><div class="version-list" style="display:none;"><ul><li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html">2019.3</a></li><li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/ScriptReference/Media.MediaEncoder-AddFrame.html">2019.2</a></li><li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/ScriptReference/Media.MediaEncoder-AddFrame.html">2019.1</a></li><li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.4</a></li><li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.3</a></li><li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.2</a></li><li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.1</a></li><li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.4</a></li><li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.3</a></li><li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.2</a></li><li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.1</a></li><li><a class="docs_version_url_560" href="/zh_CN/560/ScriptReference/Media.MediaEncoder-AddFrame.html">5.6</a></li></ul></div></div><ul class="nav-menu-items"><li class="menu-item"><a href="../Manual/index.html" class="">Manual</a></li><li class="menu-item"><a href="../ScriptReference/index.html" class="selected">Scripting API</a></li></ul><div class="lang-switcher"><div class="current toggle" data-target=".lang-list"><div class="lbl">Language:
        <span class="b">中文</span></div><div class="arrow"></div></div><div class="lang-list" style="display:none;"><ul><li><a data-lang="en" href="/2019.3/Documentation/ScriptReference/Media.MediaEncoder-AddFrame.html">English</a></li><li><a data-lang="ja" href="/ja/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html">日本語</a></li><li><a data-lang="es" href="/es/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html">Español</a></li><li><a data-lang="kr" href="/kr/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html">한국어</a></li></ul></div></div></div></div></div><div id="master-wrapper" class="master-wrapper clear"><div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Scripting API</h2><div class="version-switcher"><div class="current toggle" data-target=".version-list"><div class="version-number"><div class="d-inline-block">
          Version:
          <b>2019.3</b></div><div class="d-inline-block arrow"></div></div></div><div class="version-list" style="display:none;"><ul><li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/ScriptReference/Media.MediaEncoder-AddFrame.html">2019.3</a></li><li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/ScriptReference/Media.MediaEncoder-AddFrame.html">2019.2</a></li><li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/ScriptReference/Media.MediaEncoder-AddFrame.html">2019.1</a></li><li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.4</a></li><li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.3</a></li><li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.2</a></li><li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/ScriptReference/Media.MediaEncoder-AddFrame.html">2018.1</a></li><li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.4</a></li><li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.3</a></li><li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.2</a></li><li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/ScriptReference/Media.MediaEncoder-AddFrame.html">2017.1</a></li><li><a class="docs_version_url_560" href="/zh_CN/560/ScriptReference/Media.MediaEncoder-AddFrame.html">5.6</a></li></ul></div></div><div class="clear"></div></div></div></div></div></div><div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content"><div class="section"><div class="mb20 clear" id=""><h1 class="heading inherit"><a href="Media.MediaEncoder.html">MediaEncoder</a>.AddFrame</h1><div class="clear"></div><div class="clear"></div><a href="" class="switch-link gray-btn sbtn left hide">Switch to Manual</a><div class="clear"></div></div><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;"></span>public bool <span class="sig-kw">AddFrame</span>
        (<a href="Texture2D.html">Texture2D</a> <span class="sig-kw">texture</span>);
      </div><div class="signature-CS sig-block"><span style="color:red;"></span></div></div></div><div class="subsection"><h2>Parameters</h2><table class="list"><tr><td class="name lbl">texture</td><td class="desc">纹理，包含要写入当前帧的轨道的像素。</td></tr><tr><td class="name lbl">time</td><td class="desc">Timestamp for the new frame.</td></tr></table></div><div class="subsection"><h2>Returns</h2><p><strong>bool</strong>
        如果操作成功，则为 true。否则为 False。
      </p></div><div class="subsection"><h2>Description</h2><p>将帧附加到文件的视频轨道。</p></div><div class="subsection"><p>Keep the number of video frames and audio samples aligned so that each track is syncrhonized as much as possible. For instance, in a file with 30FPS video and 48KHz audio, each added video frame should be followed by an audio buffer of 1600 sample frames.<br /><br /><strong>Note about timestamps</strong><br /><br />When adding a frame, a timestamp associated with this frame can optionally be specified. For the timestamp to be used, it must be valid (see MediaTime.IsValid).<br /><br />When no timestamp is provided, the frame is appended using the specified video frame rate (see <a href="Media.VideoTrackAttributes-frameRate.html">VideoTrackAttributes.frameRate</a>) to compute the inter-frame time difference. There are situations where a timestamp must be specified:<br /><br /><strong>1.</strong> When the video track is created without a valid rate (see <a href="Media.VideoTrackAttributes-frameRate.html">VideoTrackAttributes.frameRate</a>. In this case, <strong>all</strong> added frames must be given a timestamp because there is no pre-defined inter-frame time difference.<br />
<strong>2.</strong> When the time difference between the last frame and the appended frame is not as expected. For example, when recording in Unity and the game loop lasts longer than expected, the inter-frame time difference is no longer constant. In this case, you must specify the timestamp associated with the appended frame. This way, when playing back the recorded movie, it will match what was seen during recording. The resulting movie will then have a <strong>Variable Frame Rate</strong> (VFR) because there is not exactly the same time difference between each frame.<br /><br />For tracks with a pre-defined rate, it is valid to mix both variants, with and without timestamps, as long as the time values end up monotonically increasing. Frames added this way do not have to be equally spaced in time. It is invalid to add a frame with a timestamp earlier than the timestamp of the last frame.</p></div><hr class="section" /><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;"></span></div><div class="signature-CS sig-block"><span style="color:red;"></span></div></div></div><div class="subsection"><h2>Parameters</h2><table class="list"><tr><td class="name lbl">width</td><td class="desc">Image width.</td></tr><tr><td class="name lbl">height</td><td class="desc">Image height.</td></tr><tr><td class="name lbl">rowBytes</td><td class="desc">Bytes in one row of pixels. Useful in case lines include padding. Can be set to 0 if there is no padding.</td></tr><tr><td class="name lbl">format</td><td class="desc">Pixel format. Only TextureFormat.RGBA32 is supported at this time.</td></tr><tr><td class="name lbl">data</td><td class="desc">Bytes containing the image.</td></tr><tr><td class="name lbl">time</td><td class="desc">Timestamp for new frame.</td></tr></table></div><div class="subsection"><h2>Returns</h2><p><strong>void</strong>
        如果操作成功，则为 true。否则为 False。
      </p></div><div class="subsection"><h2>Description</h2><p>Appends a frame from a raw buffer to the file's video track.</p></div><div class="subsection"><p>This version of AddFrame helps save image copying if the source data is not in a Texture2D. For example, when pixel data comes from a <a href="Rendering.AsyncGPUReadbackRequest.html">AsyncGPUReadbackRequest</a>. For more details, see the note about audio/video alignment in the variant of <a href="Media.MediaEncoder.AddFrame.html">MediaEncoder.AddFrame</a> taking a <a href="Texture2D.html">Texture2D</a>.<br /><br />For more information about the <code class="mono">time</code> parameter, see <strong>Note about timestamps</strong> in the other overloads of this method.</p></div></div><div class="footer-wrapper"><div class="footer clear"><div class="copy">Copyright © 2020 Unity Technologies. Publication 2019.3</div><div class="menu"><a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a></div></div><div></div></div></div></div></div></div></body></html>