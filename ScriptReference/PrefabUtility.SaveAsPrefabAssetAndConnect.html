<!DOCTYPE html><html class="no-js" lang="zh_CN"><head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="twitter:card" content="summary" /><meta name="robots" content="noindex" /><meta property="og:title" content="PrefabUtility-SaveAsPrefabAssetAndConnect - Unity Scripting API" /><title>PrefabUtility-SaveAsPrefabAssetAndConnect - Unity Scripting API</title><meta name="description" content="Use this function to create a Prefab Asset at the given path from the given GameObject including any children in the Scene and at the same time make the given GameObject into an instance of the new Prefab." /><meta property="og:description" content="Use this function to create a Prefab Asset at the given path from the given GameObject including any children in the Scene and at the same time make the given GameObject into an instance of the new Prefab." /><meta name="author" content="Unity Technologies" /><link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico" /><link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" /><link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" /><link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" /><link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" /><meta name="msapplication-TileColor" content="#222c37" /><meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" /><script>
      var docs_type = 'ScriptReference';
      var lang = 'zh_CN';
      var page = 'PrefabUtility-SaveAsPrefabAssetAndConnect';
      if(!page) page = 'index';
      var version = '2019.3';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" /><link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css" /><link rel="canonical" href="https://docs.unity3d.com/zh_CN/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html" /><link rel="alternate" href="https://docs.unity3d.com/en/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html" hreflang="en" /><link rel="alternate" href="https://docs.unity3d.com/ja/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html" hreflang="ja" /><link rel="alternate" href="https://docs.unity3d.com/es/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html" hreflang="es" /><link rel="alternate" href="https://docs.unity3d.com/kr/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html" hreflang="ko" /><link rel="alternate" href="https://docs.unity3d.com/2019.3/Documentation/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html" hreflang="x-default" /></head><body><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="header-wrapper"><div id="header" class="header"><div class="content"><div class="spacer"><div class="menu"><div id="nav-open" for="nav-input"><span></span></div><div class="logo"><a href="https://docs.unity3d.com"></a></div><div class="search-form"><form action="30_search.html" method="get" class="apisearch"><input type="text" name="q" placeholder="Search scripting..." autosave="Unity Reference" results="5" class="sbox field" id="q"></input><input type="submit" class="submit"></input></form></div><ul class="menu-items"><li class="menu-item"><a href="../Manual/index.html" class="">Manual</a></li><li class="menu-item"><a href="../ScriptReference/index.html" class="selected">Scripting API</a></li></ul></div></div><div class="more"><div class="filler"></div><ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul></div></div></div><div class="toolbar"><div class="content"><div class="version-switcher"><div class="current toggle" data-target=".version-list"><div class="version-number"><div class="d-inline-block">
          Version:
          <b>2019.3</b></div><div class="d-inline-block arrow"></div></div></div><div class="version-list" style="display:none;"><ul><li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2019.3</a></li><li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2019.2</a></li><li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2019.1</a></li><li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.4</a></li><li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.3</a></li><li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.2</a></li><li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.1</a></li><li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.4</a></li><li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.3</a></li><li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.2</a></li><li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.1</a></li><li><a class="docs_version_url_560" href="/zh_CN/560/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">5.6</a></li></ul></div></div><ul class="nav-menu-items"><li class="menu-item"><a href="../Manual/index.html" class="">Manual</a></li><li class="menu-item"><a href="../ScriptReference/index.html" class="selected">Scripting API</a></li></ul><div class="lang-switcher"><div class="current toggle" data-target=".lang-list"><div class="lbl">Language:
        <span class="b">中文</span></div><div class="arrow"></div></div><div class="lang-list" style="display:none;"><ul><li><a data-lang="en" href="/2019.3/Documentation/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">English</a></li><li><a data-lang="ja" href="/ja/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">日本語</a></li><li><a data-lang="es" href="/es/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">Español</a></li><li><a data-lang="kr" href="/kr/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">한국어</a></li></ul></div></div></div></div></div><div id="master-wrapper" class="master-wrapper clear"><div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Scripting API</h2><div class="version-switcher"><div class="current toggle" data-target=".version-list"><div class="version-number"><div class="d-inline-block">
          Version:
          <b>2019.3</b></div><div class="d-inline-block arrow"></div></div></div><div class="version-list" style="display:none;"><ul><li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2019.3</a></li><li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2019.2</a></li><li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2019.1</a></li><li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.4</a></li><li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.3</a></li><li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.2</a></li><li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2018.1</a></li><li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.4</a></li><li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.3</a></li><li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.2</a></li><li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">2017.1</a></li><li><a class="docs_version_url_560" href="/zh_CN/560/ScriptReference/PrefabUtility-SaveAsPrefabAssetAndConnect.html">5.6</a></li></ul></div></div><div class="clear"></div></div></div></div></div></div><div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content"><div class="section"><div class="mb20 clear" id=""><h1 class="heading inherit"><a href="PrefabUtility.html">PrefabUtility</a>.SaveAsPrefabAssetAndConnect</h1><div class="clear"></div><div class="clear"></div><a href="" class="switch-link gray-btn sbtn left hide">Switch to Manual</a><div class="clear"></div></div><div class="subsection"><div class="signature"><div class="signature-CS sig-block"><span style="color:red;"></span>public static <a href="GameObject.html">GameObject</a> <span class="sig-kw">SaveAsPrefabAssetAndConnect</span>
        (<a href="GameObject.html">GameObject</a> <span class="sig-kw">root</span>,
    string <span class="sig-kw">assetPath</span>,
    <a href="InteractionMode.html">InteractionMode</a> <span class="sig-kw">action</span>);
      </div><div class="signature-CS sig-block"><span style="color:red;"></span></div></div></div><div class="subsection"><h2>Parameters</h2><table class="list"><tr><td class="name lbl">instanceRoot</td><td class="desc">The GameObject to save as a Prefab and make into a Prefab instance.</td></tr><tr><td class="name lbl">assetPath</td><td class="desc">The path to save the Prefab at.</td></tr><tr><td class="name lbl">action</td><td class="desc">The interaction mode to use for this action.</td></tr><tr><td class="name lbl">success</td><td class="desc">The result of the save action, either successful or unsuccessful. Use this together with the console log to get more insight into the save process.</td></tr></table></div><div class="subsection"><h2>Returns</h2><p><strong>GameObject</strong>
        The root GameObject of the saved Prefab Asset, if available.
      </p></div><div class="subsection"><h2>Description</h2><p>Use this function to create a Prefab Asset at the given path from the given GameObject including any children in the Scene and at the same time make the given GameObject into an instance of the new Prefab.</p></div><div class="subsection"><p>In case some of the children are Prefab instances they will automatically become nested inside the new Prefab.<br /><br />The input object has to be a plain GameObject or the outermost root of a Prefab Instance. It cannot be a child inside a Prefab instance.<br /><br />If the input object is a Prefab instance root the resulting Prefab will be a Prefab Variant. If you want to create a new unique Prefab instead, you need to unpack the Prefab instance first.<br /><br />The returned object is the root GameObject of the saved Prefab Asset, if available. If the editor in currently in the middle of an asset editing batch operation, as controlled with <a href="AssetDatabase.StartAssetEditing.html">AssetDatabase.StartAssetEditing</a> and <a href="AssetDatabase.StopAssetEditing.html">AssetDatabase.StopAssetEditing</a>, assets are not immediately imported upon being saved. In this case, SaveAsPrefabAsset will return null even if the save was successful because the saved Prefab Asset was not yet reimported and thus not yet available.<br /><br />If you are saving over an existing Prefab, Unity tries to preserve references to the Prefab itself and the individual parts of the Prefab such as child GameObjects and Components. To do this, it matches the names of GameObjects between the new saved Prefab and the existing Prefab.<br /><br />Note: Because this matching is done by name only, if there are multiple GameObjects with the same name in the Prefab's hierarchy, you cannot predict which will be matched. Therefore if you need to ensure your references are preserved when saving over an existing prefab, you must ensure all GameObjects within the Prefab have unique names.<br /><br />Also note: You may encounter a similar problem in the case of preserving references to existing Components when you save over an existing Prefab, if a single GameObject within the Prefab has more than one of the same Component type attached. In this case you cannot predict which of them will be matched to the existing references.<br /><br />See Also: SaveAsPrefabAsset, UnpackPrefabInstance.</p></div><div class="subsection">
        
        <pre class="codeExampleCS">
// Create a folder (right click in the Assets directory, click <strong>Create</strong>&gt;<strong>New Folder</strong>)
// and name it “<a href="Editor.html">Editor</a>” if one doesn’t exist already. Place this script in that folder.<br /><br />// This script creates a new menu item <strong>Examples</strong>&gt;<strong>Create Prefab</strong> in the main menu.
// Use it to create Prefab(s) from the selected <a href="GameObject.html">GameObject</a>(s).
// It will be placed in the root <strong>Assets</strong> folder.<br /><br />using UnityEngine;
using <a href="UnityEditor.html">UnityEditor</a>;<br /><br />public class Example
{
    // Creates a new menu item 'Examples &gt; Create Prefab' in the main menu.
    [<a href="MenuItem.html">MenuItem</a>("Examples/Create Prefab")]
    static void CreatePrefab()
    {
        // Keep track of the currently selected <a href="GameObject.html">GameObject</a>(s)
        <a href="GameObject.html">GameObject</a>[] objectArray = <a href="Selection-gameObjects.html">Selection.gameObjects</a>;<br /><br />        // Loop through every <a href="GameObject.html">GameObject</a> in the array above
        foreach (<a href="GameObject.html">GameObject</a> gameObject in objectArray)
        {
            // Set the path as within the Assets folder,
            // and name it as the <a href="GameObject.html">GameObject</a>'s name with the .Prefab format
            string localPath = "Assets/" + gameObject.name + ".prefab";<br /><br />            // Make sure the file name is unique, in case an existing Prefab has the same name.
            localPath = <a href="AssetDatabase.GenerateUniqueAssetPath.html">AssetDatabase.GenerateUniqueAssetPath</a>(localPath);<br /><br />            // Create the new Prefab.
            <a href="PrefabUtility.SaveAsPrefabAssetAndConnect.html">PrefabUtility.SaveAsPrefabAssetAndConnect</a>(gameObject, localPath, <a href="InteractionMode.UserAction.html">InteractionMode.UserAction</a>);
        }
    }<br /><br />    // Disable the menu item if no selection is in place.
    [<a href="MenuItem.html">MenuItem</a>("Examples/Create Prefab", true)]
    static bool ValidateCreatePrefab()
    {
        return <a href="Selection-activeGameObject.html">Selection.activeGameObject</a> != null &amp;amp;&amp;amp; !<a href="EditorUtility.IsPersistent.html">EditorUtility.IsPersistent</a>(<a href="Selection-activeGameObject.html">Selection.activeGameObject</a>);
    }
}
</pre>
      </div></div><div class="footer-wrapper"><div class="footer clear"><div class="copy">Copyright © 2020 Unity Technologies. Publication 2019.3</div><div class="menu"><a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a></div></div><div></div></div></div></div></div></div></body></html>