<!DOCTYPE html><html class="no-js" lang="zh_CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="Unity 中的旋转和方向 - Unity Manual">
<title>Unity 中的旋转和方向 - Unity Manual</title>
<meta property="og:image" content="https://docs.unity3d.com/zh_CN/2019.3/uploads/Main/InspectorRotationEulerAngles.png">
<meta name="description" content="Rotations in 3D applications are usually represented in one of two ways: Quaternions or Euler angles. Each has its own uses and drawbacks. Unity uses Quaternions internally, but shows values of the equivalent Euler angles in the Inspector to make it easy for you to edit.">
<meta property="og:description" content="Rotations in 3D applications are usually represented in one of two ways: Quaternions or Euler angles. Each has its own uses and drawbacks. Unity uses Quaternions internally, but shows values of the equivalent Euler angles in the Inspector to make it easy for you to edit.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'QuaternionAndEulerRotationsInUnity';
      if(!page) page = 'index';
      var version = '2019.3';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/zh_CN/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/ja/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2019.3/Documentation/Manual/QuaternionAndEulerRotationsInUnity.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/QuaternionAndEulerRotationsInUnity.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/QuaternionAndEulerRotationsInUnity.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/QuaternionAndEulerRotationsInUnity.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/QuaternionAndEulerRotationsInUnity.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/QuaternionAndEulerRotationsInUnity.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/QuaternionAndEulerRotationsInUnity.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/QuaternionAndEulerRotationsInUnity.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/QuaternionAndEulerRotationsInUnity.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/QuaternionAndEulerRotationsInUnity.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/QuaternionAndEulerRotationsInUnity.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/QuaternionAndEulerRotationsInUnity.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2019.3/Documentation/Manual/QuaternionAndEulerRotationsInUnity.html">English</a></li>
<li><a data-lang="ja" href="/ja/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html">日本語</a></li>
<li><a data-lang="es" href="/es/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/QuaternionAndEulerRotationsInUnity.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/QuaternionAndEulerRotationsInUnity.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/QuaternionAndEulerRotationsInUnity.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/QuaternionAndEulerRotationsInUnity.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/QuaternionAndEulerRotationsInUnity.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/QuaternionAndEulerRotationsInUnity.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/QuaternionAndEulerRotationsInUnity.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/QuaternionAndEulerRotationsInUnity.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/QuaternionAndEulerRotationsInUnity.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/QuaternionAndEulerRotationsInUnity.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/QuaternionAndEulerRotationsInUnity.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/QuaternionAndEulerRotationsInUnity.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.3)</a></li>
<li><a href="UnityOverview.html">在 Unity 中操作</a></li>
<li><a href="CreatingGameplay.html">创建游戏玩法</a></li>
<li>Unity 中的旋转和方向</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="class-ScaleConstraint.html"></a></span><div class="tip">缩放约束 (Scale Constraints)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="Lights.html"></a></span><div class="tip">光源</div>
</div>
</div></div>
<h1>Unity 中的旋转和方向</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Rotations in 3D applications are usually represented in one of two ways: Quaternions or Euler angles. Each has its own uses and drawbacks. Unity uses Quaternions internally, but shows values of the equivalent Euler angles in the Inspector to make it easy for you to edit.</p>

<h2>Euler angles and quaternions</h2>

<h3>Euler angles</h3>

<p>Euler angles are represented by three angle values for X, Y and Z that are applied sequentially. To apply a Euler rotation to a particular GameObject, each rotation value is applied in turn, as a rotation around its corresponding axis.</p>

<ul>
<li>
<strong>优点</strong>：欧拉角具有直观的“可读”格式，由三个角度组成。</li>
<li>
<strong>优点</strong>：欧拉角可表示通过大于 180 度转向从一个方向到另一个方向的旋转</li>
<li>
<strong>局限性</strong>：欧拉角受到<a href="https://en.wikipedia.org/wiki/Gimbal_lock">万向锁 (Gimbal Lock)</a> 的影响。当依次施加三个旋转时，第一个或第二个旋转可能导致第三个轴的方向与先前两个轴之一相同。这意味着已失去“自由度”，因为不能围绕唯一轴应用第三个旋转值。</li>
</ul>

<h3>四元数</h3>

<p>Quaternions can be used to represent the orientation or rotation of a GameObject. This representation internally consists of four numbers (referenced in Unity as x, y, z &amp; w) however these numbers don’t represent angles or axes and you never normally need to access them directly. Unless you are particularly interested in delving into the <a href="https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation">mathematics of Quaternions</a>, you only really need to know that a Quaternion represents a rotation in 3D space and you never normally need to know or modify the x, y &amp; z properties.</p>

<p>In the same way that a Vector can represent either a position or a direction (where the direction is measured from the origin), a Quaternion can represent either an orientation or a rotation - where the rotation is measured from the rotational “origin” or “<a href="../ScriptReference/Quaternion-identity.html">Identity</a>”. It is because the rotation is measured in this way - from one orientation to another - that a quaternion can’t represent a rotation beyond 180 degrees.</p>

<ul>
<li>
<strong>优点</strong>：四元数旋转不受万向锁的影响。</li>
<li>
<strong>局限性</strong>：单个四元数不能表示任何方向超过 180 度的旋转。</li>
<li>
<strong>局限性</strong>：四元数的数字表示在直观上难以理解。</li>
</ul>

<p>Unity stores all GameObject rotations internally as Quaternions, because the benefits outweigh the limitations.</p>

<p>The Transform Inspector displays the rotation using Euler angles, because this is easier to understand and edit. Unity converts new values into the Inspector for the rotation of a GameObject into a new Quaternion rotation value for the GameObject.</p>

<figure>
<img src="../uploads/Main/InspectorRotationEulerAngles.png" alt="The rotation of a GameObject is displayed and edited as Euler angles in the Inspector, but is stored internally as a Quaternion">
<figcaption>The rotation of a GameObject is displayed and edited as Euler angles in the Inspector, but is stored internally as a Quaternion</figcaption>
</figure>

<p>As a side-effect, it is possible in the Inspector to enter a value of, say, <strong>X: 0, Y: 365, Z: 0</strong> for a GameObject’s rotation. This value is not possible to represent as a quaternion, so when you enter Play mode, the GameObject’s rotation values change to <strong>X: 0, Y: 5, Z: 0</strong>. This is because Unity converts rotation to a Quaternion which does not have the concept of a full 360-degree rotation plus 5 degrees, and instead is set to orient the same way as the result of the rotation.</p>

<h2>Implications for scripting</h2>

<p>处理脚本中的旋转时，应使用 Quaternion 类及其函数来创建和修改旋转值。在某些情况下，使用欧拉角也是有效的，但应记住：
- 应使用处理欧拉角的 Quaternion 类函数
- 从旋转中检索、修改和重新应用欧拉值可能会导致意外的副作用。</p>

<h3>Creating and manipulating quaternions directly</h3>

<p>Unity 的 Quaternion 类具有许多函数可用于创建和操作旋转，而无需使用任何欧拉角。例如：</p>

<p>创建：</p>

<ul>
<li><a href="../ScriptReference/Quaternion.LookRotation.html">Quaternion.LookRotation</a></li>
<li><a href="../ScriptReference/Quaternion.AngleAxis.html">Quaternion.AngleAxis</a></li>
<li><a href="../ScriptReference/Quaternion.FromToRotation.html">Quaternion.FromToRotation</a></li>
</ul>

<p>操作：</p>

<ul>
<li><a href="../ScriptReference/Quaternion.Slerp.html">Quaternion.Slerp</a></li>
<li><a href="../ScriptReference/Quaternion.Inverse.html">Quaternion.Inverse</a></li>
<li><a href="../ScriptReference/Quaternion.RotateTowards.html">Quaternion.RotateTowards</a></li>
<li>
<a href="../ScriptReference/Transform.Rotate.html">Transform.Rotate</a> 和 <a href="../ScriptReference/Transform.RotateAround.html">Transform.RotateAround</a>
</li>
</ul>

<p>However sometimes it’s desirable to use Euler angles in your scripts. In this case it’s important to note that you must keep your angles in variables, and only use them to <em>apply</em> them as Euler angles to your rotation. While it’s possible to retrieve Euler angles <em>from</em> a quaternion, if you retrieve, modify and re-apply, problems are likely to arise.</p>

<p>Here are some examples of <strong>mistakes</strong> commonly made using a hypothetical example of trying to rotate a GameObject around the X axis at 10 degrees per second. This is what you should <strong>avoid</strong>:</p>

<pre><code>// rotation scripting mistake #1
// the mistake here is that we are modifying the x value of a quaternion
// this value does not represent an angle, and does not produce desired results
    
void Update () 
    {
    var rot = transform.rotation;
    rot.x += Time.deltaTime * 10;
    transform.rotation = rot;
        
    }
</code></pre>

<pre><code>// rotation scripting mistake #2
// Read, modify, then write the Euler values from a Quaternion.
// Because these values are calculated from a Quaternion,
// each new rotation might return very different Euler angles, which might suffer from gimbal lock.
        
void Update () 
    {
        var angles = transform.rotation.eulerAngles;
        angles.x += Time.deltaTime * 10;
        transform.rotation = Quaternion.Euler(angles);
    }
</code></pre>

<p>And here is an example of using Euler angles in script <strong>correctly</strong>:</p>

<pre><code>// Rotation scripting with Euler angles correctly.
// Store the Euler angle in a class variable, and only use it to
// apply it as a Euler angle, but never rely on reading the Euler back.
        
float x;
void Update () 
    {
        x += Time.deltaTime * 10;
        transform.rotation = Quaternion.Euler(x,0,0);
    }
</code></pre>

<p>See documentation on <a href="../ScriptReference/Quaternion.Euler.html">Quaternion.Euler</a> for more details.</p>

<h2>对动画的影响</h2>

<p>Many 3D authoring packages, and Unity’s own internal <a href="AnimationEditorGuide.html">Animation window</a>, allow you to use Euler angles to specify rotations during an animation.</p>

<p>These rotations values can frequently exceed ranges expressable by quaternions. For example, if a GameObject rotates 720 degrees, this could be represented by Euler angles X: 0, Y: 720, Z:0. But this is not representable by a Quaternion value.</p>

<h3>Unity 的动画窗口</h3>

<p>Within Unity’s own animation window, there are options which allow you to specify how the rotation should be interpolated - using Quaternion or Euler interpolation. By specifying Euler interpolation you are telling Unity that you want the full range of motion specified by the angles. With Quaternion rotation however, you are saying you simply want the rotation to end at a particular orientation, and Unity uses Quaternion interpolation and rotate across the shortest distance to get there. See <a href="animeditor-AnimationCurves.html">Using Animation Curves</a> for more information on this.</p>

<h3>外部动画源</h3>

<p>导入来自外部的动画时，这些文件通常包含欧拉格式的旋转关键帧动画。默认情况下，Unity 会重新采样这些动画，并为动画中的每个帧生成一个新的四元数关键帧，从而避免任何关键帧之间的旋转可能超过四元数的有效范围的情况。</p>

<p>For example, imagine two keyframes, 6 frames apart, with values for X as 0 on the first keyframe and 270 on the second keyframe. Without resampling, a quaternion interpolation between these two keyframes would rotate 90 degrees in the opposite direction, because that is the shortest way to get from the first orientation to the second orientation. However by resampling and adding a keyframe on every frame, there are now only 45 degrees between keyframes so the rotation works correctly.</p>

<p>不过，仍然存在一些情况，即使使用重新采样，导入动画的四元数表示可能还是与原来不够匹配，因此，在 Unity 5.3 及更高版本中，可选择关闭动画重新采样，这样就可以在运行时改用原始的欧拉动画关键帧。想了解更多相关信息，请参阅<a href="AnimationEulerCurveImport.html">欧拉曲线旋转的动画导入</a>。</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="class-ScaleConstraint.html"></a></span><div class="tip">缩放约束 (Scale Constraints)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="Lights.html"></a></span><div class="tip">光源</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2020 Unity Technologies. Publication 2019.3</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
