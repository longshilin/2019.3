<!DOCTYPE html><html class="no-js" lang="zh_CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="WebGL：部署压缩构建 - Unity Manual">
<title>WebGL：部署压缩构建 - Unity Manual</title>
<meta property="og:image" content="https://docs.unity3d.com/zh_CN/2019.3/uploads/Main/WebGL_Publishing_Settings.png">
<meta name="description" content="When you build a WebGL project in release mode (see Publishing builds), Unity compresses your build output files to reduce the download size of your build. You can choose the type of compression it uses from the Compression Format options in Publishing Settings (menu: Edit &gt; Project Settings &gt; Player &gt; WebGL &gt; Publishing Settings):">
<meta property="og:description" content="When you build a WebGL project in release mode (see Publishing builds), Unity compresses your build output files to reduce the download size of your build. You can choose the type of compression it uses from the Compression Format options in Publishing Settings (menu: Edit &gt; Project Settings &gt; Player &gt; WebGL &gt; Publishing Settings):">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'webgl-deploying';
      if(!page) page = 'index';
      var version = '2019.3';
      var docs_versions = [{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/zh_CN/2019.3/Manual/webgl-deploying.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2019.3/Manual/webgl-deploying.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/ja/2019.3/Manual/webgl-deploying.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2019.3/Manual/webgl-deploying.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2019.3/Manual/webgl-deploying.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2019.3/Documentation/Manual/webgl-deploying.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/webgl-deploying.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/webgl-deploying.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/webgl-deploying.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/webgl-deploying.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/webgl-deploying.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/webgl-deploying.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/webgl-deploying.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/webgl-deploying.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/webgl-deploying.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/webgl-deploying.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/webgl-deploying.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/webgl-deploying.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2019.3/Documentation/Manual/webgl-deploying.html">English</a></li>
<li><a data-lang="ja" href="/ja/2019.3/Manual/webgl-deploying.html">日本語</a></li>
<li><a data-lang="es" href="/es/2019.3/Manual/webgl-deploying.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2019.3/Manual/webgl-deploying.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2019.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.3" href="/zh_CN/2019.3/Manual/webgl-deploying.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/zh_CN/2019.2/Manual/webgl-deploying.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/webgl-deploying.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/webgl-deploying.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/webgl-deploying.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/webgl-deploying.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/webgl-deploying.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/webgl-deploying.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/webgl-deploying.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/webgl-deploying.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/webgl-deploying.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/webgl-deploying.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.3)</a></li>
<li><a href="PlatformSpecific.html">Platform development</a></li>
<li><a href="webgl.html">WebGL</a></li>
<li><a href="webgl-gettingstarted.html">WebGL 开发入门</a></li>
<li>WebGL：部署压缩构建</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-building.html"></a></span><div class="tip">构建和运行 WebGL 项目</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="Webgl-Server-configuration-for-WebAssembly-streaming.html"></a></span><div class="tip">Server configuration for WebAssembly streaming</div>
</div>
</div></div>
<h1>WebGL：部署压缩构建</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>When you build a WebGL project in release mode (see <a href="PublishingBuilds.html">Publishing builds</a>), Unity compresses your build output files to reduce the download size of your build. You can choose the type of compression it uses from the <strong>Compression Format</strong> options in Publishing Settings (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong> &gt; <strong>WebGL</strong> &gt; <strong>Publishing Settings</strong>):</p>

<figure>
<img src="../uploads/Main/WebGL_Publishing_Settings.png" alt="WebGL publishing settings">
<figcaption>WebGL publishing settings</figcaption>
</figure>

<ul>
<li><p>__gzip__：这是默认选项。gzip 文件比 Brotli 文件更大，但构建速度更快，且所有浏览器都基于 http 和 https 实现此格式的本机支持。</p></li>
<li><p><strong>Brotli</strong>: Brotli compression offers the best compression ratios. Brotli compressed files are significantly smaller than gzip, but take a long time to compress, increasing your iteration times on release builds. Chrome and Firefox natively support Brotli compression over https. For more information, see documentation on <a href="webgl-browsercompatibility.html">WebGL browser compatibility</a>.</p></li>
<li><p>__Disabled__：此选项禁用压缩。如果要在后期处理脚本中实现您自己的压缩，请使用此选项。</p></li>
</ul>

<p>压缩构建的 Unity 构建可在任何浏览器上工作。Unity 包含一个用 JavaScript 编写的软件解压缩程序；当服务器未启用 http 传输级别的压缩时，可回退到此解压缩程序。</p>

<h2>Native browser decompression</h2>

<p>The browser can handle decompression of Unity builds natively while it downloads the build data. This has the advantage of avoiding the additional delay caused by decompressing your files in JavaScript, therefore reducing your application’s startup time. To let the browser handle decompression natively, you need to configure your web server to serve the compressed files with the appropriate http headers. These tell the browser that the data is compressed with gzip or Brotli so it decompresses the data while it is being transferred. Firefox and Chrome support Brotli compression on https only, while all browsers support gzip compression. For more information, see documentation on <a href="webgl-browsercompatibility.html">WebGL browser compatibility</a></p>

<h2>设置 Web 服务器</h2>

<p>The setup process for native browser decompression depends on your web server. The instructions on this page apply to the two most common web servers: <strong>Apache</strong> and <strong>IIS</strong>. <strong>Note:</strong> These servers are designed to work on a default setup, but might need adjustments to match your specific configuration. In particular, there might be issues if you already have another server-side configuration to compress hosted files, which might interfere with this setup.
To make the browser perform decompression natively and asynchronously during the download of your applications you need to append a Content-Encoding header to the server response, corresponding to the type of compression Unity uses at build time.</p>

<h3>Apache</h3>

<p>An apache server uses invisible <em>.htaccess</em> files for server configuration. The code below shows examples of <em>.htaccess</em> files which you can use to enforce native browser decompression. Apache server configuration setup is optional.</p>

<p>对于 gzip 压缩的构建，请将以下 <em>.htaccess</em> 文件放入 <em>Build</em> 子文件夹：</p>

<pre><code>&lt;IfModule mod_mime.c&gt;
  AddEncoding gzip .unityweb
&lt;/IfModule&gt;
</code></pre>

<p>对于 brotli 压缩的构建，请将以下 <em>.htaccess</em> 文件放入 <em>Build</em> 子文件夹：</p>

<pre><code>&lt;IfModule mod_mime.c&gt;
  AddEncoding br .unityweb
&lt;/IfModule&gt;
</code></pre>

<h3>IIS</h3>

<p><strong>必要的 IIS 服务器配置步骤：</strong></p>

<p>By default an IIS server does not serve static content of unknown MIME type (Multipurpose Internet Mail Extension). To make a Unity build work on IIS, you must associate the <em>.unityweb</em> extension with the <em>application/octet-stream</em> content type. There are two ways to achieve that:</p>

<p><em>Using IIS Manager interface:</em>
Select your website in the <strong>IIS Manager</strong> panel, then open the <strong>MIME Types</strong> setting. Select <strong>Add…</strong> and set the <strong>file name extension</strong> to <em>.unityweb</em> and the <strong>MIME</strong> type to <em>application/octet-stream</em>. Click <em>OK</em> to save the changes.</p>

<p><em>Using server configuration file:</em>
IIS uses <em>web.config</em> files for server configuration. Those configuration files reflect all the changes made in IIS Manager for a specific folder. To associate the <em>application/octet-stream</em> MIME type with the <em>.unityweb</em> extension, use the following <em>web.config</em> file:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;staticContent&gt;
    &lt;remove fileExtension=".unityweb" /&gt;
&lt;mimeMap fileExtension=".unityweb" mimeType="application/octet-stream" /&gt;
        &lt;/staticContent&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>

<p><strong>Note:</strong> The configuration file affects all the server subfolders, so you only need to set the MIME type for the <em>.unityweb</em> extension just once in the server root folder.</p>

<p>可选的 IIS 服务器配置步骤：</p>

<p>To speed up the build startup times, you can optionally use the following configuration files. To use this setup, you need to have Microsoft’s <a href="http://www.iis.net/downloads/microsoft/url-rewrite">IIS URL Rewrite IIS module</a> installed, otherwise, the browser throws a 500 Internal Server Error.</p>

<p>对于 gzip 压缩的构建，请将以下 <em>web.config</em> 文件放入 <em>Build</em> 子文件夹：</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;staticContent&gt;
            &lt;remove fileExtension=".unityweb" /&gt;
            &lt;mimeMap fileExtension=".unityweb" mimeType="application/octet-stream" /&gt;
        &lt;/staticContent&gt;
        &lt;rewrite&gt;
            &lt;outboundRules&gt;
            &lt;rule name="Append gzip Content-Encoding header"&gt;
            &lt;match serverVariable="RESPONSE_Content-Encoding" pattern=".*" /&gt;
            &lt;conditions&gt;
                &lt;add input="{REQUEST_FILENAME}" pattern="\.unityweb$" /&gt;
            &lt;/conditions&gt;
            &lt;action type="Rewrite" value="gzip" /&gt;
            &lt;/rule&gt;
            &lt;/outboundRules&gt;
        &lt;/rewrite&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>

<p>For Brotli-compressed builds put the following <em>web.config</em> file into the <em>Build</em> subfolder:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;staticContent&gt;
            &lt;remove fileExtension=".unityweb" /&gt;
            &lt;mimeMap fileExtension=".unityweb" mimeType="application/octet-stream" /&gt;
        &lt;/staticContent&gt;
        &lt;rewrite&gt;
            &lt;outboundRules&gt;
            &lt;rule name="Append br Content-Encoding header"&gt;
            &lt;match serverVariable="RESPONSE_Content-Encoding" pattern=".*" /&gt;
            &lt;conditions&gt;
                &lt;add input="{REQUEST_FILENAME}" pattern="\.unityweb$" /&gt;
            &lt;/conditions&gt;
            &lt;action type="Rewrite" value="br" /&gt;
            &lt;/rule&gt;
            &lt;/outboundRules&gt;
        &lt;/rewrite&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;

</code></pre>

<p><strong>Note:</strong> The <code>&lt;remove fileExtension=".unityweb" /&gt;</code> lines handle situations when the content type is already overridden at a higher level in the server directory’s hierarchy, which could otherwise cause a server exception.</p>

<h2>WebAssembly streaming</h2>

<p>WebAssembly streaming improves your build’s startup time by making the browser parse and compile the WebAssembly file while downloading it.</p>

<p>You can select WebAssembly streaming in the <strong>Publishing Settings</strong> panel (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong> &gt; <strong>WebGL</strong> &gt; <strong>Publishing Settings</strong>).</p>

<h2>Setting up web servers with WebAssembly Streaming</h2>

<p>For WebAssembly streaming compilation to work, the server needs to return .wasm with an application/wasm MIME type.</p>

<p>If you have compression enabled for your WebGL build, you need to add the correct <em>Content-Encoding</em> response header when serving the file. This is because the .wasm file that WebAssembly streaming generates is additionally compressed.</p>

<p>If you use WebAssembly streaming you must set up your web server accordingly.
For more information about Content-Encoding specifics when using WebAssembly streaming see documentation on <a href="Webgl-Server-configuration-for-WebAssembly-streaming.html">Server configuration for WebAssembly streaming</a>.</p>

<hr>

<ul>
<li><p>2019–09–04 <span class="page-history"> WebAssembly streaming added in 2019.2 </span></p></li>
<li><p><span class="page-edit">2017–05–24 Page amended
</span></p></li>
<li><p><span class="page-history">5.6 版更新</span></p></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-building.html"></a></span><div class="tip">构建和运行 WebGL 项目</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="Webgl-Server-configuration-for-WebAssembly-streaming.html"></a></span><div class="tip">Server configuration for WebAssembly streaming</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2020 Unity Technologies. Publication 2019.3</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
